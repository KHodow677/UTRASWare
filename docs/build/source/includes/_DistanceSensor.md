# Distance Sensor Driver

## Summary

The distance sensor driver was designed to work with the GP2Y0A60SZ analog distance sensor. This sensor can be used to:

* measure distance from sensor to object

* The sensor can also be used as a proximity sensor


## Specifications
 * Operating voltage: 2.7 V to 5.5 V (5V version) or 2.7 V to 3.6 V (3V version)
 * Average current consumption: 33 mA (typical)
 * Distance measuring range: 10 cm to 150 cm (4 in to 60 in)
 * Output type: analog voltage
 * Update period: 16.5 Â± 4 ms

## How does it work?
The sensor uses infrared light to detect how far an object is from it and converts the distance into an analog voltage that follows the graph shown below.

## What does the values mean?

* The higher the values, the closer an object is to the sensor.

* the lower the values, the farther way the object is



## DistanceSensorConfig

- This struct specifies the configuration of your sensor.

### Fields:

* **ADCPin:** ADC pin connected to the distance sensor. 
   * **Available pins:** PE3, PE2, PE1, PE0, PD3, PD2, PD1, PD0, PE5, PE4, PB4, PB5. 
   * Must be connected to the "OUT" pin on the sensor.

* **repeatFrequency:** the frequency at which the value of the distace sensor is updated in Hz. 
   * For instance, if set to 50, value will be updated 50 tomes a second (or every 20 ms). 
   * If set to 0, the sensor will not be updated automatically and will need to be updated manually using the "DistanceSensorGetInt" method. 

* **isThresholded:** boolean value that determines if sensor will update value with "DistanceSensorGetBool" or "DistanceSensorGetInt." 
   * true indicates it will call "DistanceSensorGetInt" 
   * false indicates it will call "DistanceSensorGetBool"

* **threshold:** indicates the threshold value from 0 to 4095 at which "DistanceSensorGetBool" should return true.
    * IF set to 2000, when the value of the sensor id greater than 2000, "DistanceSensorGetBool" will return true. If less, it will return false. 

* **module:** The ADC module for the ADC pin. 

    * **Available modules:** ADC_MODULE_0,
    ADC_MODULE_1

    * **default module:** ADC_MODULE_0

* **sequencer:** The ADC sequencer for the ADC pin.

    * **available Sequencers:** ADC_SS_0,
    ADC_SS_1,
    ADC_SS_2,
    ADC_SS_3

    * **default Sequencer:** ADC_SS_0

* **timer:** the timer ID for the interrupt for this sensor.

    * **Available timers**: TIMER_0A, TIMER_0B,
    TIMER_1A, TIMER_1B,
    TIMER_2A, TIMER_2B,
    TIMER_3A, TIMER_3B,
    TIMER_4A, TIMER_4B,
    TIMER_5A, TIMER_5B,
    WTIMER_0A, WTIMER_0B,
    WTIMER_1A, WTIMER_1B,
    WTIMER_2A, WTIMER_2B,
    WTIMER_3A, WTIMER_3B,
    WTIMER_4A, WTIMER_4B,
    WTIMER_5A, WTIMER_5B,
    SYSTICK, TIMER_COUNT.

    * **default Timer:** TIMER_0A

## Distance Sensor

* Struct generated by DistanceSensorInit when passed a particular DistanceSensorConfig to it.

* This struct will be the one used to check the value of the sensor.

### **fields:**

* **adc:** adc object that is used for the sensor

* **value:** output value of the distance sensor.

    * Value gets updated by DistanceSensorGetInt or DistanceSensorGetBool

    * if updated by DistanceSensorGetInt, it will contain a value from 0 to 4095.

    * If updated by DistanceSensorGetBool, it will contain a value of 1 or 0.

    * **How to access variable:** <sensorName>.value (or <sensorName>->value if pointer).

## DistanceSensorInit

* **What it does:** It intializes the distance sensor for a given DistanceSensorConfig.

* **Parameters:** a DistanceSensorConfig instance that specifies the configuration of the sensor.

* **output:** returns an instance of DistanceSensor which can be used to check the output value of the distance sensor.


## DistanceSensorGetInt

* * **What it does:** It updates the value field in the given DistanceSensor instance to the most recent output value of the distance sensor (value from 0 to 4095)

* **Parameters:** a pointer to a DistanceSensor instance whose value will be updated.

## DistanceSensorGetBool

*  **What it does:** It updates the value field in the given DistanceSensor instance to either 1 or 0 depending on the set threshold.

* **Parameters:** 

    1.  **sensor:** a pointer to a DistanceSensor instance whose value will be updated.
    2. **threshold:** the desired threshold for the sensor values.


